global:
  istio:
    ingressGateway:
      namespace: istio-ingress

subDomain: ververica

encryptedLicense: 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

ververica-platform:
  vvp:
    license:
      data: 
        kind: License
        apiVersion: v1
        metadata: 
          id: 0ef5dbbd-14fc-4fce-83d6-cca4010ca4a9
          createdAt: 2024-03-22T10:56:55.230274Z
          annotations: 
            signature: iQIcBAABCAAGBQJl/WP3AAoJEKio0mvM9xxRSwYQAIGZds6do/Qb+LBjMSXGIi/T9WVjohQgEJrGusqBBIKhy64nMk7GGpDHAPPUWA9Ab9CjknhBWs9Nwh5/b/XnAebF3zFaoI3QyN8NO8tRdDxxNuFhx8Q9Ziy+5//3MTVRos6mvtwmPhizMSgYs7w3XaePr/oIqWSsMLuUUe0zN+LobHMqr2CgC7wQItPpT+Fxgj5Kqivz7r9p5ROD47RrZEXo6t+SZUStMZkItIPmJiRrdeFTzECq8Y2DuzCA3d8JSN5ORhK97Cd/7TYwVRE5gzjq5DV4v/IY/ZX0hAGNWeCHYFOJ6/SvNQMDKNcUzYtB4VTTfjOeW6C/reVgmtJyFlEieTLiiMbtXAB7DVbbl/G5I8ijGVHK777IqsuPVALcDLexmDpSejyfhqoTY/0MUbgbbs/grmqtFr0ekSF/iP26iCZGBpG3iCBJxRhirDdzCKh9tha+ezT0/+TTJVjehy2aEjx4QS62evhHh5jpHlTH/S4VXEkwi06DB61g7xgJpKOFq580U6eHgSmmN9fuejsGHUMZ5gu7dOg1Tp9KIIW9kCDbj0Qx+BpnyipStoQXeLGdgnnMXpp8JQqE3VoULzf6mqyLGlX8mFj/BOqvJOo/cDhKZ+Tm72EYf7FCCbdgzK5igqCQdXp0DNdjqRuhvesRRu9eJ8/qxr9MsZZeS4hs
            licenseSpec: ewogICJsaWNlbnNlSWQiIDogIjBlZjVkYmJkLTE0ZmMtNGZjZS04M2Q2LWNjYTQwMTBjYTRhOSIsCiAgImxpY2Vuc2VkVG8iIDogIlN0ZWFkZm9yY2UiLAogICJleHBpcmVzIiA6ICIyMDI0LTA3LTAxVDAwOjAwOjAwWiIsCiAgInBhcmFtcyIgOiB7CiAgICAicXVvdGEudHlwZSIgOiAiTElNSVRFRCIsCiAgICAicXVvdGEuY3B1IiA6ICI1MDAiLAogICAgIm92ZXJ1c2UuY3B1IiA6ICIwIiwKICAgICJ0cmlhbCIgOiAiZmFsc2UiLAogICAgIm5vdEZvclJlc2FsZSIgOiAiZmFsc2UiCiAgfQp9
        spec: 
          licenseId: 0ef5dbbd-14fc-4fce-83d6-cca4010ca4a9
          licensedTo: Steadforce
          expires: 2024-07-01T00:00:00Z
          params: 
            quota.type: LIMITED
            quota.cpu: 500
            overuse.cpu: 0
            trial: false
            notForResale: false
    ### Configure VVP to use a local SQLite database
    persistence:
      type: local

    ### Configure Minio for Universal Blob Storage
    blobStorage:
      baseUri: s3://steadops-playground-bucket
      s3:
        endpoint: http://minio.minio.svc.cluster.local:80

    ### Configure some global defaults for Deployments in this instance of Ververica Platform
    globalDeploymentDefaults: |
      spec:
        state: RUNNING
        template:
          spec:
            resources:
              jobmanager:
                cpu: 0.5
                memory: 1G
              taskmanager:
                cpu: 0.5
                memory: 1G
            flinkConfiguration:
              state.backend: filesystem
              taskmanager.memory.managed.fraction: 0.0 # no managed memory needed for filesystem statebackend
              high-availability: kubernetes
              metrics.reporter.prom.class: org.apache.flink.metrics.prometheus.PrometheusReporter
              execution.checkpointing.interval: 10s
              execution.checkpointing.externalized-checkpoint-retention: RETAIN_ON_CANCELLATION

    ### Decrease the JobGraph translation thread pool size. This reduces our worst-case memory
    ### requirements by reducing the number of translations that can happen in parallel.
    ###
    ### See also: https://docs.ververica.com/platform_operations/advanced/sql.html
    sqlService:
      pool:
        coreSize: 1
        maxSize: 1

    flinkVersionMetadata:
      - flinkImageRegistry: docker pull ghcr.io/steadforce/applications/ververica-sql-session-cluster-steadforce
        flinkImageRepository: flink
        flinkVersion: 1.18
        imageTag: sha-6e2126d
        useForSqlDeployments: true
        defaultFor:
          - 1.18

    globalSessionClusterDefaults: |
      spec:
        kubernetes:
          jobManagerPodTemplate: 
            spec:
              containers:
                - name: flink-jobmanager
                  env:
                    - name: HADOOP_CONF_DIR
                      value: /etc/hadoop/conf
                  volumeMounts:
                    - name: hadoop-s3-creds
                      mountPath: /etc/hadoop/conf 
              volumes:
                - name: hadoop-s3-creds
                  secret:
                    secretName: s3-creds-secret
          taskManagerPodTemplate: 
            spec:
              containers:
                - name: flink-taskmanager
                  env:
                    - name: HADOOP_CONF_DIR
                      value: /etc/hadoop/conf
                  volumeMounts:
                    - name: hadoop-s3-creds
                      mountPath: /etc/hadoop/conf 
              volumes:
                - name: hadoop-s3-creds
                  secret:
                    secretName: s3-creds-secret
          
  blobStorageCredentials:
    existingSecret: minio-cred-secret-mirror

  ### Allow Ververica Platform to manage Apache Flink deployments in "vvp-jobs" namespace
  rbac:
    additionalNamespaces:
    - ververica-jobs

  ### Reduce gateway container memory requests.
  gateway:
    resources:
      limits:
        memory: 1Gi
      requests:
        memory: 1Gi
    image:
      repository: ghcr.io/steadforce/applications/ververica-connector-gateway-steadforce
      tag: sha-eb3f3d1

  licenseConfigPath: file:/etc/vvp-licenses/license.yaml
  volumes:
    - name: license
      secret:
        secretName: ververica-license
    - name: hadoop-s3-creds
      secret:
        secretName: s3-creds-secret
  volumeMounts:
    - name: license
      mountPath: /etc/vvp-licenses/
    - name: hadoop-s3-creds
      mountPath: /etc/hadoop/conf
  env:
    - name: HADOOP_CONF_DIR
      value: /etc/hadoop/conf





